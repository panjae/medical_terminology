<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>골격근 섬유 타입 비교 시뮬레이션</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            color: #1e3a5f;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            color: #718096;
            margin-bottom: 20px;
        }
        
        .comparison-controls {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }
        
        .controls-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #1e3a5f;
            margin-bottom: 15px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: 2px solid;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            min-width: 160px;
            position: relative;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .btn.active::before {
            content: "▶ ";
            position: absolute;
            left: 8px;
            color: white;
        }
        
        .btn-compare {
            border-color: #2d3748;
            color: #2d3748;
        }
        .btn-compare:hover, .btn-compare.active {
            background: #2d3748;
            color: white;
        }
        
        .btn-endurance {
            border-color: #dc3545;
            color: #dc3545;
        }
        .btn-endurance:hover, .btn-endurance.active {
            background: #dc3545;
            color: white;
        }
        
        .btn-sprint {
            border-color: #6c757d;
            color: #6c757d;
        }
        .btn-sprint:hover, .btn-sprint.active {
            background: #6c757d;
            color: white;
        }
        
        .exercise-status {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .timer {
            font-size: 1.8em;
            font-weight: bold;
            color: #dc3545;
            background: white;
            padding: 8px 16px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .status-text {
            font-size: 1.1em;
            color: #4a5568;
            font-weight: 500;
        }
        
        .comparison-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .muscle-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            border-top: 6px solid;
        }
        
        .type-i-panel {
            border-top-color: #dc3545;
        }
        
        .type-ii-panel {
            border-top-color: #6c757d;
        }
        
        .panel-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .panel-title {
            font-size: 1.6em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .type-i-title {
            color: #dc3545;
        }
        
        .type-ii-title {
            color: #6c757d;
        }
        
        .panel-subtitle {
            font-size: 1.1em;
            color: #718096;
        }
        
        .fiber-visual {
            position: relative;
            height: 200px;
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid #e2e8f0;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        }
        
        .fiber-strand {
            position: absolute;
            height: 18px;
            border-radius: 9px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .type-i-strand {
            background: linear-gradient(90deg, #dc3545, #c82333, #dc3545);
            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
        }
        
        .type-ii-strand {
            background: linear-gradient(90deg, #6c757d, #5a6268, #6c757d);
            box-shadow: 0 2px 4px rgba(108, 117, 125, 0.3);
        }
        
        .strand1 { top: 30px; left: 15px; width: 75%; }
        .strand2 { top: 60px; left: 20px; width: 70%; }
        .strand3 { top: 90px; left: 10px; width: 80%; }
        .strand4 { top: 120px; left: 18px; width: 72%; }
        .strand5 { top: 150px; left: 12px; width: 76%; }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .metric-label {
            font-size: 0.9em;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .type-i-value {
            color: #dc3545;
        }
        
        .type-ii-value {
            color: #6c757d;
        }
        
        .metric-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .metric-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .type-i-fill {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }
        
        .type-ii-fill {
            background: linear-gradient(90deg, #6c757d, #5a6268);
        }
        
        .comparison-charts {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .charts-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #1e3a5f;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .chart-row {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .chart-label {
            width: 180px;
            font-weight: 600;
            color: #2d3748;
            font-size: 1.1em;
        }
        
        .chart-comparison {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .chart-bar {
            height: 25px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            transition: all 0.5s ease;
            position: relative;
        }
        
        .type-i-bar {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }
        
        .type-ii-bar {
            background: linear-gradient(90deg, #6c757d, #5a6268);
        }
        
        .chart-bar::before {
            content: attr(data-type);
            position: absolute;
            left: -80px;
            color: #4a5568;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        .winner-indicator {
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            color: #f39c12;
        }
        
        .side-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .type-i-card {
            border-left: 5px solid #dc3545;
        }
        
        .type-ii-card {
            border-left: 5px solid #6c757d;
        }
        
        .card-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-item {
            padding: 8px 0;
            border-bottom: 1px solid #f1f3f4;
            display: flex;
            align-items: center;
            font-size: 1.05em;
        }
        
        .feature-item:last-child {
            border-bottom: none;
        }
        
        .feature-item::before {
            content: "●";
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .type-i-card .feature-item::before {
            color: #dc3545;
        }
        
        .type-ii-card .feature-item::before {
            color: #6c757d;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .red { background: linear-gradient(135deg, #dc3545, #c82333); }
        .gray { background: linear-gradient(135deg, #6c757d, #5a6268); }
        
        /* 애니메이션 */
        @keyframes contractSlow {
            0% { width: 75%; transform: scaleY(1); }
            50% { width: 55%; transform: scaleY(1.1); }
            100% { width: 75%; transform: scaleY(1); }
        }
        
        @keyframes contractFast {
            0% { width: 75%; transform: scaleY(1); }
            25% { width: 35%; transform: scaleY(1.3); }
            50% { width: 75%; transform: scaleY(1); }
            75% { width: 35%; transform: scaleY(1.3); }
            100% { width: 75%; transform: scaleY(1); }
        }
        
        @keyframes fatigue {
            0% { opacity: 1; filter: brightness(1); }
            100% { opacity: 0.4; filter: brightness(0.6); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .contracting-slow {
            animation: contractSlow 4s ease-in-out infinite;
        }
        
        .contracting-fast {
            animation: contractFast 1.2s ease-in-out infinite;
        }
        
        .fatigued {
            animation: fatigue 2s ease-in forwards;
        }
        
        .pulsing {
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .comparison-area,
            .side-comparison,
            .chart-comparison {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .chart-row {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            
            .chart-label {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚡ 골격근 섬유 타입 비교 시뮬레이션</h1>
            <p class="subtitle">Type I vs Type II Muscle Fiber Comparison</p>
        </div>

        <div class="comparison-controls">
            <h3 class="controls-title">🔬 실시간 비교 시뮬레이션</h3>
            <div class="controls">
                <button class="btn btn-compare" onclick="startComparison()">📊 동시 비교</button>
                <button class="btn btn-endurance" onclick="simulateEndurance()">🏃 지구력 테스트</button>
                <button class="btn btn-sprint" onclick="simulateSprint()">⚡ 파워 테스트</button>
                <button class="btn" onclick="resetAll()">↺ 초기화</button>
            </div>
            <div class="exercise-status">
                <div class="timer" id="timer">00:00</div>
                <div class="status-text" id="statusText">시뮬레이션을 선택하세요</div>
            </div>
        </div>

        <div class="comparison-area">
            <div class="muscle-panel type-i-panel">
                <div class="panel-header">
                    <h3 class="panel-title type-i-title">Type I 섬유 (적근)</h3>
                    <p class="panel-subtitle">지구력 특화 • 산화적 대사</p>
                </div>
                
                <div class="fiber-visual" id="typeI-visual">
                    <div class="fiber-strand type-i-strand strand1" id="typeI-strand1">지구력 섬유 1</div>
                    <div class="fiber-strand type-i-strand strand2" id="typeI-strand2">지구력 섬유 2</div>
                    <div class="fiber-strand type-i-strand strand3" id="typeI-strand3">지구력 섬유 3</div>
                    <div class="fiber-strand type-i-strand strand4" id="typeI-strand4">지구력 섬유 4</div>
                    <div class="fiber-strand type-i-strand strand5" id="typeI-strand5">지구력 섬유 5</div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-label">수축력</div>
                        <div class="metric-value type-i-value" id="typeI-force">0%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-i-fill" id="typeI-force-bar"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">지속성</div>
                        <div class="metric-value type-i-value" id="typeI-endurance">100%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-i-fill" id="typeI-endurance-bar" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ATP 수준</div>
                        <div class="metric-value type-i-value" id="typeI-atp">100%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-i-fill" id="typeI-atp-bar" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">피로도</div>
                        <div class="metric-value type-i-value" id="typeI-fatigue">0%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-i-fill" id="typeI-fatigue-bar"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="muscle-panel type-ii-panel">
                <div class="panel-header">
                    <h3 class="panel-title type-ii-title">Type II 섬유 (백근)</h3>
                    <p class="panel-subtitle">파워 특화 • 해당과정 대사</p>
                </div>
                
                <div class="fiber-visual" id="typeII-visual">
                    <div class="fiber-strand type-ii-strand strand1" id="typeII-strand1">파워 섬유 1</div>
                    <div class="fiber-strand type-ii-strand strand2" id="typeII-strand2">파워 섬유 2</div>
                    <div class="fiber-strand type-ii-strand strand3" id="typeII-strand3">파워 섬유 3</div>
                    <div class="fiber-strand type-ii-strand strand4" id="typeII-strand4">파워 섬유 4</div>
                    <div class="fiber-strand type-ii-strand strand5" id="typeII-strand5">파워 섬유 5</div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-label">수축력</div>
                        <div class="metric-value type-ii-value" id="typeII-force">0%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-ii-fill" id="typeII-force-bar"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">지속성</div>
                        <div class="metric-value type-ii-value" id="typeII-endurance">30%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-ii-fill" id="typeII-endurance-bar" style="width: 30%;"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">ATP 수준</div>
                        <div class="metric-value type-ii-value" id="typeII-atp">100%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-ii-fill" id="typeII-atp-bar" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">피로도</div>
                        <div class="metric-value type-ii-value" id="typeII-fatigue">0%</div>
                        <div class="metric-bar">
                            <div class="metric-fill type-ii-fill" id="typeII-fatigue-bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="comparison-charts">
            <h3 class="charts-title">📈 실시간 성능 비교</h3>
            
            <div class="chart-row">
                <div class="chart-label">수축 속도</div>
                <div class="chart-comparison">
                    <div class="chart-bar type-i-bar" data-type="Type I" style="width: 30%;" id="speed-typeI">
                        느림 (30%)
                    </div>
                    <div class="chart-bar type-ii-bar" data-type="Type II" style="width: 95%;" id="speed-typeII">
                        빠름 (95%) <span class="winner-indicator">👑</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-row">
                <div class="chart-label">최대 출력</div>
                <div class="chart-comparison">
                    <div class="chart-bar type-i-bar" data-type="Type I" style="width: 45%;" id="power-typeI">
                        중간 (45%)
                    </div>
                    <div class="chart-bar type-ii-bar" data-type="Type II" style="width: 100%;" id="power-typeII">
                        높음 (100%) <span class="winner-indicator">👑</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-row">
                <div class="chart-label">지구력</div>
                <div class="chart-comparison">
                    <div class="chart-bar type-i-bar" data-type="Type I" style="width: 100%;" id="endurance-typeI">
                        매우높음 (100%) <span class="winner-indicator">👑</span>
                    </div>
                    <div class="chart-bar type-ii-bar" data-type="Type II" style="width: 25%;" id="endurance-typeII">
                        낮음 (25%)
                    </div>
                </div>
            </div>
            
            <div class="chart-row">
                <div class="chart-label">피로 저항성</div>
                <div class="chart-comparison">
                    <div class="chart-bar type-i-bar" data-type="Type I" style="width: 95%;" id="resistance-typeI">
                        높음 (95%) <span class="winner-indicator">👑</span>
                    </div>
                    <div class="chart-bar type-ii-bar" data-type="Type II" style="width: 15%;" id="resistance-typeII">
                        낮음 (15%)
                    </div>
                </div>
            </div>
            
            <div class="chart-row">
                <div class="chart-label">산소 의존성</div>
                <div class="chart-comparison">
                    <div class="chart-bar type-i-bar" data-type="Type I" style="width: 90%;" id="oxygen-typeI">
                        높음 (90%) <span class="winner-indicator">👑</span>
                    </div>
                    <div class="chart-bar type-ii-bar" data-type="Type II" style="width: 20%;" id="oxygen-typeII">
                        낮음 (20%)
                    </div>
                </div>
            </div>
        </div>

        <div class="side-comparison">
            <div class="feature-card type-i-card">
                <div class="card-header">
                    <h4 class="card-title type-i-title">Type I 특성</h4>
                </div>
                <ul class="feature-list">
                    <li class="feature-item">느리고 지속적인 수축</li>
                    <li class="feature-item">높은 미토콘드리아 밀도</li>
                    <li class="feature-item">풍부한 미오글로빈 (적색)</li>
                    <li class="feature-item">산화적 인산화 주도</li>
                    <li class="feature-item">높은 모세혈관 밀도</li>
                    <li class="feature-item">피로 저항성 우수</li>
                    <li class="feature-item">마라톤, 사이클링에 적합</li>
                    <li class="feature-item">자세 유지 근육</li>
                </ul>
            </div>

            <div class="feature-card type-ii-card">
                <div class="card-header">
                    <h4 class="card-title type-ii-title">Type II 특성</h4>
                </div>
                <ul class="feature-list">
                    <li class="feature-item">빠르고 강력한 수축</li>
                    <li class="feature-item">낮은 미토콘드리아 밀도</li>
                    <li class="feature-item">적은 미오글로빈 (백색)</li>
                    <li class="feature-item">해당과정 주도</li>
                    <li class="feature-item">낮은 모세혈관 밀도</li>
                    <li class="feature-item">빠른 피로 발생</li>
                    <li class="feature-item">스프린트, 웨이트에 적합</li>
                    <li class="feature-item">폭발적 움직임</li>
                </ul>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color red"></div>
                <span>Type I - 지구력형 (Red Muscle)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color gray"></div>
                <span>Type II - 파워형 (White Muscle)</span>
            </div>
        </div>
    </div>

    <script>
        let simulationActive = false;
        let simulationInterval;
        let currentTime = 0;
        let simulationType = null;
        
        // 근섬유 상태 데이터
        const muscleData = {
            typeI: {
                force: 0,
                endurance: 100,
                atp: 100,
                fatigue: 0,
                maxForce: 60,
                baseEndurance: 100,
                fatigueRate: 0.15
            },
            typeII: {
                force: 0,
                endurance: 30,
                atp: 100,
                fatigue: 0,
                maxForce: 100,
                baseEndurance: 30,
                fatigueRate: 1.8
            }
        };

        function startComparison() {
            resetAll();
            simulationType = 'comparison';
            simulationActive = true;
            setActiveButton(0);
            
            document.getElementById('statusText').textContent = '두 근섬유 타입 동시 비교 진행 중';
            
            // 동시 활성화로 차이점 강조
            activateBothTypes();
            simulationInterval = setInterval(updateComparison, 200);
        }

        function simulateEndurance() {
            resetAll();
            simulationType = 'endurance';
            simulationActive = true;
            setActiveButton(1);
            
            document.getElementById('statusText').textContent = '지구력 테스트 - Type I 우위 예상';
            
            activateEnduranceMode();
            simulationInterval = setInterval(updateEnduranceTest, 150);
        }

        function simulateSprint() {
            resetAll();
            simulationType = 'sprint';
            simulationActive = true;
            setActiveButton(2);
            
            document.getElementById('statusText').textContent = '파워 테스트 - Type II 우위 예상';
            
            activateSprintMode();
            simulationInterval = setInterval(updateSprintTest, 120);
        }

        function activateBothTypes() {
            // Type I 섬유 활성화 (느린 수축)
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeI-strand${i}`);
                strand.classList.add('contracting-slow');
            }
            
            // Type II 섬유 활성화 (빠른 수축)
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeII-strand${i}`);
                strand.classList.add('contracting-fast');
            }
            
            // 초기 수축력 설정
            muscleData.typeI.force = 45;
            muscleData.typeII.force = 80;
        }

        function activateEnduranceMode() {
            // Type I 주도적 활성화
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeI-strand${i}`);
                strand.classList.add('contracting-slow', 'pulsing');
            }
            
            // Type II 보조적 활성화
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeII-strand${i}`);
                strand.classList.add('contracting-fast');
            }
            
            muscleData.typeI.force = 50;
            muscleData.typeII.force = 35;
        }

        function activateSprintMode() {
            // Type II 주도적 활성화
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeII-strand${i}`);
                strand.classList.add('contracting-fast', 'pulsing');
            }
            
            // Type I 보조적 활성화
            for (let i = 1; i <= 5; i++) {
                const strand = document.getElementById(`typeI-strand${i}`);
                strand.classList.add('contracting-slow');
            }
            
            muscleData.typeI.force = 25;
            muscleData.typeII.force = 95;
        }

        function updateComparison() {
            currentTime += 0.2;
            updateTimer();
            
            // Type I - 안정적 성능 유지
            muscleData.typeI.force = 45 + Math.sin(currentTime * 0.3) * 8;
            muscleData.typeI.fatigue += 0.12;
            muscleData.typeI.atp = Math.max(85 - currentTime * 0.4, 60);
            muscleData.typeI.endurance = Math.max(100 - currentTime * 0.2, 70);
            
            // Type II - 초기 높은 성능, 빠른 감소
            if (currentTime < 15) {
                muscleData.typeII.force = 80 - currentTime * 2;
                muscleData.typeII.fatigue += 1.5;
                muscleData.typeII.atp = Math.max(90 - currentTime * 2.5, 25);
                muscleData.typeII.endurance = Math.max(30 - currentTime * 1.2, 5);
            } else {
                muscleData.typeII.force = Math.max(50 - (currentTime - 15) * 1.5, 10);
                muscleData.typeII.fatigue = Math.min(90, muscleData.typeII.fatigue + 0.8);
                muscleData.typeII.atp = Math.max(25 - (currentTime - 15) * 0.3, 5);
                muscleData.typeII.endurance = Math.max(5, 5);
                
                // Type II 피로 표시
                for (let i = 1; i <= 5; i++) {
                    const strand = document.getElementById(`typeII-strand${i}`);
                    strand.classList.add('fatigued');
                }
            }
            
            updateAllDisplays();
            updateComparisonCharts();
            
            if (currentTime >= 60) {
                stopSimulation();
            }
        }

        function updateEnduranceTest() {
            currentTime += 0.15;
            updateTimer();
            
            // Type I - 지구력 테스트에서 우수한 성능
            muscleData.typeI.force = Math.min(50 + Math.sin(currentTime * 0.4) * 10, 65);
            muscleData.typeI.fatigue += 0.08;
            muscleData.typeI.atp = Math.max(90 - currentTime * 0.25, 75);
            muscleData.typeI.endurance = Math.max(100 - currentTime * 0.15, 80);
            
            // Type II - 지구력 테스트에서 빠른 저하
            if (currentTime < 8) {
                muscleData.typeII.force = Math.max(35 - currentTime * 3, 5);
                muscleData.typeII.fatigue += 2.5;
                muscleData.typeII.atp = Math.max(80 - currentTime * 4, 15);
                muscleData.typeII.endurance = Math.max(30 - currentTime * 2.5, 0);
            } else {
                muscleData.typeII.force = 5;
                muscleData.typeII.fatigue = Math.min(95, muscleData.typeII.fatigue);
                muscleData.typeII.atp = Math.max(15 - (currentTime - 8) * 0.2, 5);
                muscleData.typeII.endurance = 0;
                
                // Type II 완전 피로
                for (let i = 1; i <= 5; i++) {
                    const strand = document.getElementById(`typeII-strand${i}`);
                    strand.classList.add('fatigued');
                    strand.classList.remove('contracting-fast');
                }
            }
            
            updateAllDisplays();
            updateComparisonCharts();
            
            if (currentTime >= 45) {
                stopSimulation();
            }
        }

        function updateSprintTest() {
            currentTime += 0.12;
            updateTimer();
            
            // Type II - 스프린트에서 우수한 초기 성능
            if (currentTime < 8) {
                muscleData.typeII.force = 95 + Math.sin(currentTime * 2) * 5;
                muscleData.typeII.fatigue += 2.8;
                muscleData.typeII.atp = Math.max(95 - currentTime * 4, 30);
                muscleData.typeII.endurance = Math.max(30 - currentTime * 2, 5);
            } else {
                muscleData.typeII.force = Math.max(100 - (currentTime - 8) * 5, 15);
                muscleData.typeII.fatigue = Math.min(85, muscleData.typeII.fatigue + 1.5);
                muscleData.typeII.atp = Math.max(30 - (currentTime - 8) * 1.5, 10);
                muscleData.typeII.endurance = Math.max(5, 2);
            }
            
            // Type I - 스프린트에서 보조적 역할
            muscleData.typeI.force = Math.min(25 + currentTime * 0.8, 40);
            muscleData.typeI.fatigue += 0.6;
            muscleData.typeI.atp = Math.max(85 - currentTime * 1.2, 50);
            muscleData.typeI.endurance = Math.max(100 - currentTime * 0.8, 60);
            
            if (currentTime > 12) {
                // Type II 피로 표시
                for (let i = 1; i <= 5; i++) {
                    const strand = document.getElementById(`typeII-strand${i}`);
                    strand.classList.add('fatigued');
                }
            }
            
            updateAllDisplays();
            updateComparisonCharts();
            
            if (currentTime >= 25) {
                stopSimulation();
            }
        }

        function updateAllDisplays() {
            // Type I 메트릭 업데이트
            document.getElementById('typeI-force').textContent = Math.round(muscleData.typeI.force) + '%';
            document.getElementById('typeI-endurance').textContent = Math.round(muscleData.typeI.endurance) + '%';
            document.getElementById('typeI-atp').textContent = Math.round(muscleData.typeI.atp) + '%';
            document.getElementById('typeI-fatigue').textContent = Math.round(muscleData.typeI.fatigue) + '%';
            
            document.getElementById('typeI-force-bar').style.width = muscleData.typeI.force + '%';
            document.getElementById('typeI-endurance-bar').style.width = muscleData.typeI.endurance + '%';
            document.getElementById('typeI-atp-bar').style.width = muscleData.typeI.atp + '%';
            document.getElementById('typeI-fatigue-bar').style.width = muscleData.typeI.fatigue + '%';
            
            // Type II 메트릭 업데이트
            document.getElementById('typeII-force').textContent = Math.round(muscleData.typeII.force) + '%';
            document.getElementById('typeII-endurance').textContent = Math.round(muscleData.typeII.endurance) + '%';
            document.getElementById('typeII-atp').textContent = Math.round(muscleData.typeII.atp) + '%';
            document.getElementById('typeII-fatigue').textContent = Math.round(muscleData.typeII.fatigue) + '%';
            
            document.getElementById('typeII-force-bar').style.width = muscleData.typeII.force + '%';
            document.getElementById('typeII-endurance-bar').style.width = muscleData.typeII.endurance + '%';
            document.getElementById('typeII-atp-bar').style.width = muscleData.typeII.atp + '%';
            document.getElementById('typeII-fatigue-bar').style.width = muscleData.typeII.fatigue + '%';
        }

        function updateComparisonCharts() {
            // 실시간 성능 비교 차트 업데이트는 여기서 추가 가능
            // 현재는 정적 차트이지만, 동적으로 변경할 수 있음
        }

        function updateTimer() {
            const minutes = Math.floor(currentTime / 60);
            const seconds = Math.floor(currentTime % 60);
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function stopSimulation() {
            simulationActive = false;
            clearInterval(simulationInterval);
            
            const allStrands = document.querySelectorAll('.fiber-strand');
            allStrands.forEach(strand => {
                strand.classList.remove('contracting-slow', 'contracting-fast', 'pulsing');
            });
            
            let message = '';
            switch(simulationType) {
                case 'comparison':
                    message = '비교 완료! Type I은 지속력, Type II는 순간 파워에서 우수';
                    break;
                case 'endurance':
                    message = '지구력 테스트 완료! Type I이 압도적 우위';
                    break;
                case 'sprint':
                    message = '파워 테스트 완료! Type II가 초기 폭발력에서 우위';
                    break;
            }
            document.getElementById('statusText').textContent = message;
        }

        function resetAll() {
            simulationActive = false;
            clearInterval(simulationInterval);
            currentTime = 0;
            
            // 데이터 초기화
            muscleData.typeI = { force: 0, endurance: 100, atp: 100, fatigue: 0, maxForce: 60, baseEndurance: 100, fatigueRate: 0.15 };
            muscleData.typeII = { force: 0, endurance: 30, atp: 100, fatigue: 0, maxForce: 100, baseEndurance: 30, fatigueRate: 1.8 };
            
            updateAllDisplays();
            updateTimer();
            
            // 애니메이션 초기화
            const allStrands = document.querySelectorAll('.fiber-strand');
            allStrands.forEach(strand => {
                strand.classList.remove('contracting-slow', 'contracting-fast', 'fatigued', 'pulsing');
            });
            
            document.getElementById('statusText').textContent = '시뮬레이션을 선택하세요';
            setActiveButton(-1);
        }

        function setActiveButton(index) {
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            if (index >= 0 && index < 3) {
                buttons[index].classList.add('active');
            }
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            resetAll();
            console.log('골격근 섬유 비교 시뮬레이션이 준비되었습니다!');
        });

        // 키보드 단축키
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case '1': startComparison(); break;
                case '2': simulateEndurance(); break;
                case '3': simulateSprint(); break;
                case 'r': resetAll(); break;
            }
        });
    </script>
</body>
</html>