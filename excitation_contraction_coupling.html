<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaÂ²âº Channels & Excitation-Contraction Coupling</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3f66 0%, #2c5282 50%, #3182ce 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.15);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px solid #2d3748;
            padding-bottom: 20px;
        }
        
        .header h1 {
            font-size: 2.8em;
            color: #1a202c;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.3em;
            color: #4a5568;
            font-weight: 500;
        }
        
        .subtitle {
            font-size: 1.1em;
            color: #718096;
            margin-top: 5px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 22px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            min-width: 140px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .btn-step1 { background: linear-gradient(135deg, #718096, #4a5568); }
        .btn-step2 { background: linear-gradient(135deg, #ed8936, #dd6b20); }
        .btn-step3 { background: linear-gradient(135deg, #e53e3e, #c53030); }
        .btn-step4 { background: linear-gradient(135deg, #3182ce, #2c5282); }
        .btn-step5 { background: linear-gradient(135deg, #805ad5, #6b46c1); }
        .btn-step6 { background: linear-gradient(135deg, #38a169, #2f855a); }
        .btn-channels { background: linear-gradient(135deg, #319795, #2c7a7b); }
        .btn-reset { background: linear-gradient(135deg, #2d3748, #1a202c); }
        
        .simulation-area {
            background: #f7fafc;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            position: relative;
            min-height: 700px;
            overflow: hidden;
            border: 2px solid #e2e8f0;
        }
        
        .triad-structure {
            position: relative;
            width: 100%;
            height: 600px;
            margin: 20px auto;
        }
        
        /* T-tubule structure */
        .t-tubule {
            position: absolute;
            top: 250px;
            left: 100px;
            width: 400px;
            height: 60px;
            background: linear-gradient(90deg, #2d3748 0%, #4a5568 50%, #2d3748 100%);
            border-radius: 30px;
            z-index: 3;
            box-shadow: 0 6px 20px rgba(45, 55, 72, 0.3);
        }
        
        .t-tubule-label {
            position: absolute;
            top: 320px;
            left: 280px;
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            text-align: center;
        }
        
        /* T-tubule lumen */
        .t-tubule-lumen {
            position: absolute;
            top: 265px;
            left: 120px;
            width: 360px;
            height: 30px;
            background: linear-gradient(90deg, #bee3f8, #90cdf4, #bee3f8);
            border-radius: 15px;
            z-index: 4;
            opacity: 0.8;
        }
        
        /* Sarcoplasmic Reticulum - Terminal Cisternae */
        .sr-cisterna-left {
            position: absolute;
            top: 150px;
            left: 50px;
            width: 120px;
            height: 200px;
            background: linear-gradient(135deg, #805ad5, #9f7aea);
            border-radius: 20px;
            z-index: 2;
            box-shadow: 0 6px 20px rgba(128, 90, 213, 0.3);
        }
        
        .sr-cisterna-right {
            position: absolute;
            top: 150px;
            right: 50px;
            width: 120px;
            height: 200px;
            background: linear-gradient(135deg, #805ad5, #9f7aea);
            border-radius: 20px;
            z-index: 2;
            box-shadow: 0 6px 20px rgba(128, 90, 213, 0.3);
        }
        
        /* SR Labels */
        .sr-label-left {
            position: absolute;
            top: 120px;
            left: 70px;
            font-size: 12px;
            font-weight: 600;
            color: #553c9a;
            text-align: center;
            width: 80px;
        }
        
        .sr-label-right {
            position: absolute;
            top: 120px;
            right: 70px;
            font-size: 12px;
            font-weight: 600;
            color: #553c9a;
            text-align: center;
            width: 80px;
        }
        
        /* L-type Ca2+ Channels (DHPRs) */
        .ltype-channel {
            position: absolute;
            width: 16px;
            height: 24px;
            background: linear-gradient(180deg, #ed8936, #dd6b20);
            border-radius: 8px;
            z-index: 5;
            transition: all 1s ease;
            box-shadow: 0 3px 8px rgba(237, 137, 54, 0.4);
        }
        
        .ltype1 { top: 310px; left: 180px; }
        .ltype2 { top: 310px; left: 220px; }
        .ltype3 { top: 310px; left: 260px; }
        .ltype4 { top: 310px; left: 300px; }
        .ltype5 { top: 310px; left: 340px; }
        .ltype6 { top: 310px; left: 380px; }
        .ltype7 { top: 310px; left: 420px; }
        
        /* T-type Ca2+ Channels */
        .ttype-channel {
            position: absolute;
            width: 12px;
            height: 18px;
            background: linear-gradient(180deg, #38a169, #2f855a);
            border-radius: 6px;
            z-index: 5;
            transition: all 1s ease;
            box-shadow: 0 3px 8px rgba(56, 161, 105, 0.4);
        }
        
        .ttype1 { top: 240px; left: 160px; }
        .ttype2 { top: 240px; left: 200px; }
        .ttype3 { top: 240px; left: 280px; }
        .ttype4 { top: 240px; left: 320px; }
        .ttype5 { top: 240px; left: 400px; }
        .ttype6 { top: 240px; left: 440px; }
        
        /* Store-Operated Ca2+ Channels (SOCC) */
        .socc-channel {
            position: absolute;
            width: 14px;
            height: 20px;
            background: linear-gradient(180deg, #319795, #2c7a7b);
            border-radius: 7px;
            z-index: 5;
            transition: all 1s ease;
            box-shadow: 0 3px 8px rgba(49, 151, 149, 0.4);
        }
        
        .socc1 { top: 235px; left: 130px; }
        .socc2 { top: 235px; left: 240px; }
        .socc3 { top: 235px; left: 360px; }
        .socc4 { top: 235px; left: 470px; }
        
        /* Ryanodine Receptors (RyRs) */
        .ryr-receptor {
            position: absolute;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #e53e3e, #c53030);
            border-radius: 10px;
            z-index: 5;
            transition: all 1s ease;
            box-shadow: 0 3px 8px rgba(229, 62, 62, 0.4);
        }
        
        .ryr1 { top: 330px; left: 70px; }
        .ryr2 { top: 340px; left: 90px; }
        .ryr3 { top: 350px; left: 110px; }
        .ryr4 { top: 340px; left: 130px; }
        .ryr5 { top: 330px; left: 150px; }
        .ryr6 { top: 330px; right: 70px; }
        .ryr7 { top: 340px; right: 90px; }
        .ryr8 { top: 350px; right: 110px; }
        .ryr9 { top: 340px; right: 130px; }
        .ryr10 { top: 330px; right: 150px; }
        
        /* IP3 Receptors */
        .ip3-receptor {
            position: absolute;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #9f7aea, #805ad5);
            border-radius: 9px;
            z-index: 5;
            transition: all 1s ease;
            box-shadow: 0 3px 8px rgba(159, 122, 234, 0.4);
        }
        
        .ip3r1 { top: 180px; left: 85px; }
        .ip3r2 { top: 200px; left: 105px; }
        .ip3r3 { top: 180px; right: 85px; }
        .ip3r4 { top: 200px; right: 105px; }
        
        /* Ca2+ ions in SR */
        .ca-ion-sr {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ffd700, #f6e05e);
            border-radius: 50%;
            z-index: 4;
            opacity: 0.9;
            transition: all 1s ease;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #744210;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(255, 215, 0, 0.4);
        }
        
        /* Ca2+ ions released */
        .ca-ion-released {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #ffd700, #f6e05e);
            border-radius: 50%;
            z-index: 6;
            opacity: 0;
            transition: all 1s ease;
            font-size: 7px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #744210;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(255, 215, 0, 0.4);
        }
        
        /* Action potential wave */
        .action-potential {
            position: absolute;
            width: 25px;
            height: 25px;
            background: radial-gradient(circle, #e53e3e, #c53030);
            border-radius: 50%;
            z-index: 7;
            opacity: 0;
            top: 270px;
            left: 110px;
            box-shadow: 0 0 20px rgba(229, 62, 62, 0.6);
        }
        
        /* Channel comparison panel */
        .channel-comparison {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.98);
            z-index: 10;
            padding: 40px;
            overflow-y: auto;
        }
        
        .comparison-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .comparison-title {
            font-size: 2em;
            color: #1a202c;
            margin-bottom: 10px;
        }
        
        .comparison-subtitle {
            font-size: 1.2em;
            color: #4a5568;
        }
        
        .channel-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .channel-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-left: 6px solid #3182ce;
            transition: transform 0.3s ease;
        }
        
        .channel-card:hover {
            transform: translateY(-5px);
        }
        
        .channel-card.ltype { border-left-color: #ed8936; }
        .channel-card.ttype { border-left-color: #38a169; }
        .channel-card.socc { border-left-color: #319795; }
        .channel-card.ryr { border-left-color: #e53e3e; }
        .channel-card.ip3r { border-left-color: #9f7aea; }
        
        .channel-name {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .channel-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .channel-properties {
            list-style: none;
            padding: 0;
        }
        
        .channel-properties li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 1em;
            line-height: 1.5;
        }
        
        .channel-properties li:last-child {
            border-bottom: none;
        }
        
        .property-label {
            font-weight: 600;
            color: #2d3748;
        }
        
        .property-value {
            color: #4a5568;
            margin-left: 10px;
        }
        
        .close-comparison {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e53e3e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .close-comparison:hover {
            background: #c53030;
            transform: scale(1.05);
        }
        
        /* Status indicators */
        .step-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            font-weight: 600;
            min-width: 250px;
            border-left: 5px solid #3182ce;
        }
        
        .step-number {
            font-size: 1.4em;
            color: #e53e3e;
            margin-bottom: 8px;
        }
        
        .step-description {
            font-size: 1em;
            color: #4a5568;
            line-height: 1.5;
        }
        
        /* Voltage indicator */
        .voltage-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            font-weight: 600;
            min-width: 200px;
            border-left: 5px solid #ed8936;
        }
        
        .voltage-value {
            font-size: 1.3em;
            color: #ed8936;
            margin-bottom: 8px;
        }
        
        .voltage-bar {
            width: 150px;
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .voltage-fill {
            height: 100%;
            background: linear-gradient(90deg, #38a169, #ed8936, #e53e3e);
            transition: width 1s ease;
            border-radius: 6px;
            width: 20%;
        }
        
        .status-display {
            text-align: center;
            margin: 30px 0;
            padding: 30px;
            background: #f7fafc;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }
        
        .status-title {
            font-size: 2em;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 15px;
        }
        
        .status-description {
            font-size: 1.3em;
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.6;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .mechanism-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .detail-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            border-left: 6px solid #3182ce;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .detail-card:hover {
            transform: translateY(-5px);
        }
        
        .card-title {
            font-weight: 700;
            font-size: 1.4em;
            color: #1a202c;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-content {
            list-style: none;
            padding: 0;
        }
        
        .card-content li {
            padding: 10px 0;
            font-size: 1.1em;
            line-height: 1.6;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
        }
        
        .card-content li:last-child {
            border-bottom: none;
        }
        
        .card-content li:before {
            content: "â–¶ ";
            color: #3182ce;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 40px;
            padding: 25px;
            background: #f7fafc;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.9em;
            color: #2d3748;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        /* Animations */
        @keyframes propagate {
            0% { opacity: 1; transform: scale(0.8); left: 110px; }
            25% { opacity: 1; transform: scale(1.2); left: 200px; }
            50% { opacity: 1; transform: scale(1); left: 300px; }
            75% { opacity: 1; transform: scale(1.2); left: 400px; }
            100% { opacity: 0; transform: scale(0.8); left: 480px; }
        }
        
        @keyframes ltype-activation {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); box-shadow: 0 0 20px #ed8936; }
            100% { transform: scale(1); }
        }
        
        @keyframes ttype-activation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); box-shadow: 0 0 15px #38a169; }
            100% { transform: scale(1); }
        }
        
        @keyframes socc-activation {
            0% { transform: scale(1); }
            50% { transform: scale(1.25); box-shadow: 0 0 18px #319795; }
            100% { transform: scale(1); }
        }
        
        @keyframes ryr-activation {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); box-shadow: 0 0 20px #e53e3e; }
            100% { transform: scale(1); }
        }
        
        @keyframes ip3r-activation {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); box-shadow: 0 0 18px #9f7aea; }
            100% { transform: scale(1); }
        }
        
        @keyframes ca-release {
            0% { transform: translateY(0) scale(0.8); opacity: 0; }
            50% { transform: translateY(40px) scale(1.2); opacity: 1; }
            100% { transform: translateY(80px) scale(1); opacity: 1; }
        }
        
        @keyframes ca-reuptake {
            0% { transform: translateY(80px) scale(1); opacity: 1; }
            100% { transform: translateY(0) scale(0.8); opacity: 0; }
        }
        
        .ltype-active { animation: ltype-activation 1.5s infinite; }
        .ttype-active { animation: ttype-activation 1.8s infinite; }
        .socc-active { animation: socc-activation 2s infinite; }
        .ryr-active { animation: ryr-activation 1.5s infinite; }
        .ip3r-active { animation: ip3r-activation 1.7s infinite; }
        
        .floating { animation: ca-release 2s ease-out; }
        .retracting { animation: ca-reuptake 2s ease-in; }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .triad-structure {
                transform: scale(0.6);
                margin: -70px auto;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                min-width: 200px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .channel-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ CaÂ²âº Channels & Excitation-Contraction Coupling</h1>
            <p>ì¹¼ìŠ˜ ì±„ë„ ì¢…ë¥˜ì™€ ê³¨ê²©ê·¼ í¥ë¶„-ìˆ˜ì¶• ì—°ê²° ë©”ì»¤ë‹ˆì¦˜</p>
            <div class="subtitle">Calcium Channel Types & Triad Structure Simulation</div>
        </div>

        <div class="controls">
            <button class="btn btn-step1" onclick="step1()">1. íœ´ì‹ìƒíƒœ</button>
            <button class="btn btn-step2" onclick="step2()">2. í™œë™ì „ìœ„</button>
            <button class="btn btn-step3" onclick="step3()">3. L-type í™œì„±í™”</button>
            <button class="btn btn-step4" onclick="step4()">4. RyR ê°œë°©</button>
            <button class="btn btn-step5" onclick="step5()">5. CaÂ²âº ë°©ì¶œ</button>
            <button class="btn btn-step6" onclick="step6()">6. ì¬í¡ìˆ˜</button>
            <button class="btn btn-channels" onclick="showChannelComparison()">ğŸ“‹ ì±„ë„ ë¹„êµ</button>
            <button class="btn btn-reset" onclick="resetSimulation()">â†º ì´ˆê¸°í™”</button>
        </div>

        <div class="simulation-area">
            <div class="step-indicator" id="stepIndicator">
                <div class="step-number" id="stepNumber">Step 1</div>
                <div class="step-description" id="stepDescription">íœ´ì‹ ìƒíƒœ - ë‹¤ì–‘í•œ CaÂ²âº ì±„ë„ë“¤</div>
            </div>

            <div class="voltage-indicator">
                <div class="voltage-value" id="voltageValue">ë§‰ì „ìœ„: -70 mV</div>
                <div class="voltage-bar">
                    <div class="voltage-fill" id="voltageFill"></div>
                </div>
                <div style="font-size: 0.9em; color: #718096; margin-top: 8px;">Sarcolemma Potential</div>
            </div>

            <div class="triad-structure">
                <!-- T-tubule -->
                <div class="t-tubule"></div>
                <div class="t-tubule-lumen"></div>
                <div class="t-tubule-label">T-tubule (Transverse tubule)</div>
                
                <!-- Sarcoplasmic Reticulum -->
                <div class="sr-cisterna-left"></div>
                <div class="sr-cisterna-right"></div>
                <div class="sr-label-left">Terminal<br>Cisterna</div>
                <div class="sr-label-right">Terminal<br>Cisterna</div>
                
                <!-- Action Potential -->
                <div class="action-potential" id="actionPotential"></div>
                
                <!-- L-type Ca2+ Channels (DHPRs) -->
                <div class="ltype-channel ltype1" id="ltype1" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype2" id="ltype2" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype3" id="ltype3" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype4" id="ltype4" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype5" id="ltype5" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype6" id="ltype6" title="L-type CaÂ²âº Channel (DHPR)"></div>
                <div class="ltype-channel ltype7" id="ltype7" title="L-type CaÂ²âº Channel (DHPR)"></div>
                
                <!-- T-type Ca2+ Channels -->
                <div class="ttype-channel ttype1" id="ttype1" title="T-type CaÂ²âº Channel"></div>
                <div class="ttype-channel ttype2" id="ttype2" title="T-type CaÂ²âº Channel"></div>
                <div class="ttype-channel ttype3" id="ttype3" title="T-type CaÂ²âº Channel"></div>
                <div class="ttype-channel ttype4" id="ttype4" title="T-type CaÂ²âº Channel"></div>
                <div class="ttype-channel ttype5" id="ttype5" title="T-type CaÂ²âº Channel"></div>
                <div class="ttype-channel ttype6" id="ttype6" title="T-type CaÂ²âº Channel"></div>
                
                <!-- Store-Operated Ca2+ Channels -->
                <div class="socc-channel socc1" id="socc1" title="Store-Operated CaÂ²âº Channel"></div>
                <div class="socc-channel socc2" id="socc2" title="Store-Operated CaÂ²âº Channel"></div>
                <div class="socc-channel socc3" id="socc3" title="Store-Operated CaÂ²âº Channel"></div>
                <div class="socc-channel socc4" id="socc4" title="Store-Operated CaÂ²âº Channel"></div>
                
                <!-- Ryanodine Receptors -->
                <div class="ryr-receptor ryr1" id="ryr1" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr2" id="ryr2" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr3" id="ryr3" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr4" id="ryr4" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr5" id="ryr5" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr6" id="ryr6" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr7" id="ryr7" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr8" id="ryr8" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr9" id="ryr9" title="Ryanodine Receptor (RyR1)"></div>
                <div class="ryr-receptor ryr10" id="ryr10" title="Ryanodine Receptor (RyR1)"></div>
                
                <!-- IP3 Receptors -->
                <div class="ip3-receptor ip3r1" id="ip3r1" title="IPâ‚ƒ Receptor"></div>
                <div class="ip3-receptor ip3r2" id="ip3r2" title="IPâ‚ƒ Receptor"></div>
                <div class="ip3-receptor ip3r3" id="ip3r3" title="IPâ‚ƒ Receptor"></div>
                <div class="ip3-receptor ip3r4" id="ip3r4" title="IPâ‚ƒ Receptor"></div>
                
                <!-- Ca2+ ions in SR -->
                <div class="ca-ion-sr" id="ca-sr-1" style="top: 180px; left: 80px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-2" style="top: 200px; left: 100px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-3" style="top: 220px; left: 85px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-4" style="top: 240px; left: 110px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-5" style="top: 260px; left: 95px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-6" style="top: 280px; left: 75px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-7" style="top: 300px; left: 105px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-8" style="top: 180px; right: 80px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-9" style="top: 200px; right: 100px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-10" style="top: 220px; right: 85px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-11" style="top: 240px; right: 110px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-12" style="top: 260px; right: 95px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-13" style="top: 280px; right: 75px;">Ca</div>
                <div class="ca-ion-sr" id="ca-sr-14" style="top: 300px; right: 105px;">Ca</div>
                
                <!-- Released Ca2+ ions -->
                <div class="ca-ion-released" id="ca-rel-1" style="top: 370px; left: 200px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-2" style="top: 380px; left: 230px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-3" style="top: 390px; left: 260px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-4" style="top: 380px; left: 290px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-5" style="top: 370px; left: 320px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-6" style="top: 390px; left: 350px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-7" style="top: 380px; left: 380px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-8" style="top: 370px; left: 410px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-9" style="top: 400px; left: 240px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-10" style="top: 410px; left: 270px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-11" style="top: 400px; left: 300px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-12" style="top: 410px; left: 330px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-13" style="top: 400px; left: 360px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-14" style="top: 410px; left: 390px;">Ca</div>
                <div class="ca-ion-released" id="ca-rel-15" style="top: 420px; left: 250px;">Ca</div>
            </div>

            <!-- Channel Comparison Panel -->
            <div class="channel-comparison" id="channelComparison">
                <button class="close-comparison" onclick="hideChannelComparison()">âœ• ë‹«ê¸°</button>
                
                <div class="comparison-header">
                    <h2 class="comparison-title">CaÂ²âº Channel ì¢…ë¥˜ë³„ ë¹„êµ</h2>
                    <p class="comparison-subtitle">Structure, Function & Pharmacological Properties</p>
                </div>

                <div class="channel-grid">
                    <div class="channel-card ltype">
                        <div class="channel-name">
                            <div class="channel-icon" style="background: linear-gradient(135deg, #ed8936, #dd6b20);"></div>
                            L-type CaÂ²âº Channels (DHPR)
                        </div>
                        <ul class="channel-properties">
                            <li><span class="property-label">ì •ì‹ëª…ì¹­:</span><span class="property-value">Cav1.1 (Î±1S subunit)</span></li>
                            <li><span class="property-label">ìœ„ì¹˜:</span><span class="property-value">T-tubule membrane</span></li>
                            <li><span class="property-label">í™œì„±í™”:</span><span class="property-value">High voltage-activated (HVA)</span></li>
                            <li><span class="property-label">ì—­ì¹˜ì „ì••:</span><span class="property-value">-30 to -20 mV</span></li>
                            <li><span class="property-label">ë¹„í™œì„±í™”:</span><span class="property-value">Slow inactivation</span></li>
                            <li><span class="property-label">ì£¼ìš”ê¸°ëŠ¥:</span><span class="property-value">Voltage sensor for EC coupling</span></li>
                            <li><span class="property-label">êµ¬ì¡°íŠ¹ì§•:</span><span class="property-value">Tetrad arrangement (4ê°œ êµ°ì§‘)</span></li>
                            <li><span class="property-label">ì•½ë¬¼ë¯¼ê°ì„±:</span><span class="property-value">Dihydropyridines (DHP)</span></li>
                            <li><span class="property-label">CaÂ²âº ìœ ì…:</span><span class="property-value">Minimal (ì£¼ë¡œ voltage sensor)</span></li>
                            <li><span class="property-label">RyR ì—°ê²°:</span><span class="property-value">Direct mechanical coupling</span></li>
                        </ul>
                    </div>

                    <div class="channel-card ttype">
                        <div class="channel-name">
                            <div class="channel-icon" style="background: linear-gradient(135deg, #38a169, #2f855a);"></div>
                            T-type CaÂ²âº Channels
                        </div>
                        <ul class="channel-properties">
                            <li><span class="property-label">ì •ì‹ëª…ì¹­:</span><span class="property-value">Cav3.1, Cav3.2 (Î±1G, Î±1H)</span></li>
                            <li><span class="property-label">ìœ„ì¹˜:</span><span class="property-value">Sarcolemma, T-tubule</span></li>
                            <li><span class="property-label">í™œì„±í™”:</span><span class="property-value">Low voltage-activated (LVA)</span></li>
                            <li><span class="property-label">ì—­ì¹˜ì „ì••:</span><span class="property-value">-60 to -50 mV</span></li>
                            <li><span class="property-label">ë¹„í™œì„±í™”:</span><span class="property-value">Fast inactivation</span></li>
                            <li><span class="property-label">ì£¼ìš”ê¸°ëŠ¥:</span><span class="property-value">Early depolarization, pacemaker</span></li>
                            <li><span class="property-label">êµ¬ì¡°íŠ¹ì§•:</span><span class="property-value">Small single channel conductance</span></li>
                            <li><span class="property-label">ì•½ë¬¼ë¯¼ê°ì„±:</span><span class="property-value">NiÂ²âº, mibefradil</span></li>
                            <li><span class="property-label">CaÂ²âº ìœ ì…:</span><span class="property-value">ì‘ì€ ì–‘ì˜ ì´ˆê¸° ìœ ì…</span></li>
                            <li><span class="property-label">ê·¼ë°œë‹¬:</span><span class="property-value">Myoblast differentiation</span></li>
                        </ul>
                    </div>

                    <div class="channel-card socc">
                        <div class="channel-name">
                            <div class="channel-icon" style="background: linear-gradient(135deg, #319795, #2c7a7b);"></div>
                            Store-Operated CaÂ²âº Channels (SOCC)
                        </div>
                        <ul class="channel-properties">
                            <li><span class="property-label">ì •ì‹ëª…ì¹­:</span><span class="property-value">STIM1/Orai1 complex</span></li>
                            <li><span class="property-label">ìœ„ì¹˜:</span><span class="property-value">Sarcolemma, Tubular system</span></li>
                            <li><span class="property-label">í™œì„±í™”:</span><span class="property-value">SR CaÂ²âº depletion</span></li>
                            <li><span class="property-label">ì„¼ì„œ:</span><span class="property-value">STIM1 (SR CaÂ²âº sensor)</span></li>
                            <li><span class="property-label">ì±„ë„:</span><span class="property-value">Orai1 (CRAC channel)</span></li>
                            <li><span class="property-label">ì£¼ìš”ê¸°ëŠ¥:</span><span class="property-value">SR CaÂ²âº store refilling</span></li>
                            <li><span class="property-label">êµ¬ì¡°íŠ¹ì§•:</span><span class="property-value">ER-PM junction formation</span></li>
                            <li><span class="property-label">ì•½ë¬¼ë¯¼ê°ì„±:</span><span class="property-value">2-APB, SKF-96365</span></li>
                            <li><span class="property-label">CaÂ²âº ìœ ì…:</span><span class="property-value">ì§€ì†ì ì´ê³  ëŠë¦° ìœ ì…</span></li>
                            <li><span class="property-label">í•­ìƒì„±:</span><span class="property-value">CaÂ²âº homeostasis ìœ ì§€</span></li>
                        </ul>
                    </div>

                    <div class="channel-card ryr">
                        <div class="channel-name">
                            <div class="channel-icon" style="background: linear-gradient(135deg, #e53e3e, #c53030);"></div>
                            Ryanodine Receptors (RyR)
                        </div>
                        <ul class="channel-properties">
                            <li><span class="property-label">ì •ì‹ëª…ì¹­:</span><span class="property-value">RyR1 (skeletal muscle type)</span></li>
                            <li><span class="property-label">ìœ„ì¹˜:</span><span class="property-value">SR terminal cisternae</span></li>
                            <li><span class="property-label">í™œì„±í™”:</span><span class="property-value">DHPR mechanical coupling</span></li>
                            <li><span class="property-label">í¬ê¸°:</span><span class="property-value">ê°€ì¥ í° ì´ì˜¨ ì±„ë„ (2.2 MDa)</span></li>
                            <li><span class="property-label">êµ¬ì¡°:</span><span class="property-value">Homotetrameric (4ê°œ subunit)</span></li>
                            <li><span class="property-label">ì£¼ìš”ê¸°ëŠ¥:</span><span class="property-value">SR CaÂ²âº release channel</span></li>
                            <li><span class="property-label">ì¡°ì ˆ:</span><span class="property-value">CaÂ²âº, MgÂ²âº, ATP, calmodulin</span></li>
                            <li><span class="property-label">ì•½ë¬¼ë¯¼ê°ì„±:</span><span class="property-value">Ryanodine, caffeine</span></li>
                            <li><span class="property-label">CaÂ²âº ë°©ì¶œ:</span><span class="property-value">ëŒ€ëŸ‰ì˜ ë¹ ë¥¸ ë°©ì¶œ</span></li>
                            <li><span class="property-label">ì§ˆí™˜:</span><span class="property-value">Malignant hyperthermia</span></li>
                        </ul>
                    </div>

                    <div class="channel-card ip3r">
                        <div class="channel-name">
                            <div class="channel-icon" style="background: linear-gradient(135deg, #9f7aea, #805ad5);"></div>
                            IPâ‚ƒ Receptors (IPâ‚ƒR)
                        </div>
                        <ul class="channel-properties">
                            <li><span class="property-label">ì •ì‹ëª…ì¹­:</span><span class="property-value">IPâ‚ƒR1, IPâ‚ƒR2, IPâ‚ƒR3</span></li>
                            <li><span class="property-label">ìœ„ì¹˜:</span><span class="property-value">SR membrane (ì „ì²´)</span></li>
                            <li><span class="property-label">í™œì„±í™”:</span><span class="property-value">IPâ‚ƒ binding</span></li>
                            <li><span class="property-label">ì‹ í˜¸ì „ë‹¬:</span><span class="property-value">PLC-IPâ‚ƒ pathway</span></li>
                            <li><span class="property-label">êµ¬ì¡°:</span><span class="property-value">Tetrameric, 6 TM domains</span></li>
                            <li><span class="property-label">ì£¼ìš”ê¸°ëŠ¥:</span><span class="property-value">Local CaÂ²âº signaling</span></li>
                            <li><span class="property-label">ì¡°ì ˆ:</span><span class="property-value">IPâ‚ƒ, CaÂ²âº (biphasic)</span></li>
                            <li><span class="property-label">ì•½ë¬¼ë¯¼ê°ì„±:</span><span class="property-value">2-APB, xestospongin C</span></li>
                            <li><span class="property-label">CaÂ²âº ë°©ì¶œ:</span><span class="property-value">êµ­ì†Œì , ì§„ë™ì„±</span></li>
                            <li><span class="property-label">ê·¼ìœ¡ì—ì„œ:</span><span class="property-value">ë³´ì¡°ì  ì—­í• , ë¶„í™”</span></li>
                        </ul>
                    </div>
                </div>

                <div class="mechanism-details">
                    <div class="detail-card">
                        <div class="card-title">ğŸ”‹ Voltage-Gated Channels</div>
                        <ul class="card-content">
                            <li>L-type: ê³ ì „ì•• í™œì„±í™”, ëŠë¦° ë¹„í™œì„±í™”</li>
                            <li>T-type: ì €ì „ì•• í™œì„±í™”, ë¹ ë¥¸ ë¹„í™œì„±í™”</li>
                            <li>ì „ì•• ì˜ì¡´ì  CaÂ²âº ìœ ì…</li>
                            <li>ë§‰ì „ìœ„ ë³€í™”ì— ì¦‰ê° ë°˜ì‘</li>
                            <li>í¥ë¶„ì„± ì„¸í¬ì—ì„œ ì£¼ìš” ì—­í• </li>
                        </ul>
                    </div>
                    
                    <div class="detail-card">
                        <div class="card-title">ğŸ”„ Ligand-Gated Channels</div>
                        <ul class="card-content">
                            <li>RyR: ê¸°ê³„ì  coupling, CaÂ²âº ì¡°ì ˆ</li>
                            <li>IPâ‚ƒR: IPâ‚ƒ ê²°í•©, G-protein ì‹ í˜¸</li>
                            <li>ì„¸í¬ë‚´ CaÂ²âº storeì—ì„œ ë°©ì¶œ</li>
                            <li>ì‹ í˜¸ ì¦í­ ë©”ì»¤ë‹ˆì¦˜</li>
                            <li>CaÂ²âº-induced CaÂ²âº release</li>
                        </ul>
                    </div>
                    
                    <div class="detail-card">
                        <div class="card-title">ğŸª Store-Operated Channels</div>
                        <ul class="card-content">
                            <li>STIM1: SR CaÂ²âº ì„¼ì„œ ë‹¨ë°±ì§ˆ</li>
                            <li>Orai1: CRAC channel (CaÂ²âº í†µë¡œ)</li>
                            <li>Store depletionìœ¼ë¡œ í™œì„±í™”</li>
                            <li>CaÂ²âº í•­ìƒì„± ìœ ì§€</li>
                            <li>ì¥ê¸°ê°„ CaÂ²âº ì‹ í˜¸</li>
                        </ul>
                    </div>
                    
                    <div class="detail-card">
                        <div class="card-title">âš¡ Functional Integration</div>
                        <ul class="card-content">
                            <li>L-type + RyR: ì£¼ìš” EC coupling</li>
                            <li>T-type: ì´ˆê¸° depolarization</li>
                            <li>SOCC: CaÂ²âº store ì¬ì¶©ì „</li>
                            <li>IPâ‚ƒR: êµ­ì†Œ CaÂ²âº ì‹ í˜¸</li>
                            <li>í˜‘ë™ì  CaÂ²âº ì¡°ì ˆ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-display">
            <div class="status-title" id="statusTitle">CaÂ²âº Channels & Excitation-Contraction Coupling</div>
            <div class="status-description" id="statusDescription">
                ê³¨ê²©ê·¼ì—ì„œ ë‹¤ì–‘í•œ CaÂ²âº ì±„ë„ë“¤ì´ í˜‘ë ¥í•˜ì—¬ ì‹ ê²½ì‹ í˜¸ë¥¼ ê·¼ìˆ˜ì¶•ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ë³µí•©ì ì¸ ë¶„ì ë©”ì»¤ë‹ˆì¦˜ì„ ê´€ì°°í•˜ì„¸ìš”.
            </div>
        </div>

        <div class="mechanism-details">
            <div class="detail-card">
                <div class="card-title">ğŸ”µ T-tubule System</div>
                <ul class="card-content">
                    <li>Sarcolemmaì˜ invaginationìœ¼ë¡œ í˜•ì„±</li>
                    <li>ê·¼ì„¬ìœ  ë‚´ë¶€ê¹Œì§€ í™œë™ì „ìœ„ ì „ë‹¬</li>
                    <li>ë‹¤ì–‘í•œ CaÂ²âº channels ë¶„í¬</li>
                    <li>Triad êµ¬ì¡°ì˜ ì¤‘ì‹¬ ìš”ì†Œ</li>
                    <li>ì „ê¸°ì  ì‹ í˜¸ì˜ ê³µê°„ì  ì „íŒŒ</li>
                </ul>
            </div>
            
            <div class="detail-card">
                <div class="card-title">ğŸŸ¡ Primary Coupling (L-type + RyR)</div>
                <ul class="card-content">
                    <li>DHPR: voltage sensor ì—­í• </li>
                    <li>Physical coupling with RyR1</li>
                    <li>Mechanical gating ë©”ì»¤ë‹ˆì¦˜</li>
                    <li>ë¹ ë¥´ê³  ê°•ë ¥í•œ CaÂ²âº ë°©ì¶œ</li>
                    <li>ì£¼ìš” ê·¼ìˆ˜ì¶• ê°œì‹œ ê²½ë¡œ</li>
                </ul>
            </div>
            
            <div class="detail-card">
                <div class="card-title">ğŸŸ¢ Secondary Pathways</div>
                <ul class="card-content">
                    <li>T-type: ì´ˆê¸° depolarization ì§€ì›</li>
                    <li>SOCC: CaÂ²âº store ì¬ì¶©ì „</li>
                    <li>IPâ‚ƒR: êµ­ì†Œ CaÂ²âº ì‹ í˜¸</li>
                    <li>ìƒí˜¸ ë³´ì™„ì  ê¸°ëŠ¥</li>
                    <li>CaÂ²âº í•­ìƒì„± ì¡°ì ˆ</li>
                </ul>
            </div>
            
            <div class="detail-card">
                <div class="card-title">ğŸŸ£ Clinical Relevance</div>
                <ul class="card-content">
                    <li>RyR1 mutations: Malignant hyperthermia</li>
                    <li>DHPR defects: Hypokalemic paralysis</li>
                    <li>CaÂ²âº channel blockers: ì¹˜ë£Œì œ</li>
                    <li>ê·¼ìœ¡ ì§ˆí™˜ì˜ ë¶„ìì  ê¸°ì „</li>
                    <li>ì•½ë¬¼ í‘œì ìœ¼ë¡œì„œì˜ ì¤‘ìš”ì„±</li>
                </ul>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #2d3748, #4a5568);"></div>
                <span>T-tubule</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #805ad5, #9f7aea);"></div>
                <span>Sarcoplasmic Reticulum</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #ed8936, #dd6b20);"></div>
                <span>L-type CaÂ²âº (DHPR)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #38a169, #2f855a);"></div>
                <span>T-type CaÂ²âº</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #319795, #2c7a7b);"></div>
                <span>SOCC</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #e53e3e, #c53030);"></div>
                <span>RyR</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #9f7aea, #805ad5);"></div>
                <span>IPâ‚ƒR</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: radial-gradient(circle, #ffd700, #f6e05e);"></div>
                <span>CaÂ²âº ions</span>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        
        function updateStepIndicator(step, description) {
            document.getElementById('stepNumber').textContent = `Step ${step}`;
            document.getElementById('stepDescription').textContent = description;
            currentStep = step;
        }
        
        function updateVoltage(voltage, percentage) {
            document.getElementById('voltageValue').textContent = `ë§‰ì „ìœ„: ${voltage} mV`;
            document.getElementById('voltageFill').style.width = percentage + '%';
        }
        
        function resetAllAnimations() {
            // ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì œê±°
            const elements = document.querySelectorAll('.ltype-active, .ttype-active, .socc-active, .ryr-active, .ip3r-active, .floating, .retracting');
            elements.forEach(el => {
                el.classList.remove('ltype-active', 'ttype-active', 'socc-active', 'ryr-active', 'ip3r-active', 'floating', 'retracting');
            });
            
            // ë°©ì¶œëœ Ca2+ ì´ì˜¨ ìˆ¨ê¹€
            for (let i = 1; i <= 15; i++) {
                const caRel = document.getElementById(`ca-rel-${i}`);
                if (caRel) caRel.style.opacity = '0';
            }
            
            // í™œë™ì „ìœ„ ìˆ¨ê¹€
            document.getElementById('actionPotential').style.opacity = '0';
        }
        
        function step1() {
            resetAllAnimations();
            updateStepIndicator(1, 'íœ´ì‹ ìƒíƒœ - ë‹¤ì–‘í•œ CaÂ²âº ì±„ë„ë“¤');
            updateVoltage(-70, 20);
            
            document.getElementById('statusTitle').textContent = 'Step 1: íœ´ì‹ ìƒíƒœ (Resting State)';
            document.getElementById('statusDescription').textContent = 
                'ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ CaÂ²âº ì±„ë„ë“¤ì´ íœ´ì‹ ìƒíƒœì…ë‹ˆë‹¤. L-type(ì£¼í™©ìƒ‰), T-type(ë…¹ìƒ‰), SOCC(ì²­ë¡ìƒ‰), RyR(ë¹¨ê°•), IPâ‚ƒR(ë³´ë¼) ì±„ë„ë“¤ì´ ëª¨ë‘ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.';
        }
        
        function step2() {
            resetAllAnimations();
            updateStepIndicator(2, 'í™œë™ì „ìœ„ê°€ T-tubuleì„ í†µí•´ ì „íŒŒ');
            updateVoltage(+30, 80);
            
            document.getElementById('statusTitle').textContent = 'Step 2: í™œë™ì „ìœ„ ì „íŒŒ (Action Potential Propagation)';
            document.getElementById('statusDescription').textContent = 
                'ê·¼ì„¬ìœ  í‘œë©´ì˜ í™œë™ì „ìœ„ê°€ T-tubuleì„ í†µí•´ ì „íŒŒë©ë‹ˆë‹¤. ì´ë•Œ ë‹¤ì–‘í•œ ì „ì•• ì˜ì¡´ì„± CaÂ²âº ì±„ë„ë“¤ì´ í™œì„±í™” ì¤€ë¹„ë¥¼ í•©ë‹ˆë‹¤.';
            
            // í™œë™ì „ìœ„ ì „íŒŒ ì• ë‹ˆë©”ì´ì…˜
            const ap = document.getElementById('actionPotential');
            ap.style.opacity = '1';
            ap.style.animation = 'propagate 3s ease-out';
            
            // T-type ì±„ë„ ì•½ê°„ í™œì„±í™” (ë‚®ì€ ì—­ì¹˜)
            setTimeout(() => {
                for (let i = 1; i <= 6; i++) {
                    setTimeout(() => {
                        const ttype = document.getElementById(`ttype${i}`);
                        ttype.classList.add('ttype-active');
                    }, i * 100);
                }
            }, 1000);
        }
        
        function step3() {
            resetAllAnimations();
            updateStepIndicator(3, 'L-type CaÂ²âº ì±„ë„ (DHPR) í™œì„±í™”');
            updateVoltage(+30, 80);
            
            document.getElementById('statusTitle').textContent = 'Step 3: L-type ì±„ë„ í™œì„±í™” (L-type Channel Activation)';
            document.getElementById('statusDescription').textContent = 
                'ë†’ì€ ë§‰ì „ìœ„ì— ì˜í•´ L-type CaÂ²âº ì±„ë„(DHPR)ì´ í™œì„±í™”ë©ë‹ˆë‹¤. ì´ë“¤ì€ voltage sensorë¡œ ì‘ìš©í•˜ë©° RyRê³¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.';
            
            // T-type ë¨¼ì € í™œì„±í™” (ë‚®ì€ ì—­ì¹˜)
            for (let i = 1; i <= 6; i++) {
                const ttype = document.getElementById(`ttype${i}`);
                ttype.classList.add('ttype-active');
            }
            
            // L-type í™œì„±í™” (ë†’ì€ ì—­ì¹˜)
            setTimeout(() => {
                for (let i = 1; i <= 7; i++) {
                    setTimeout(() => {
                        const ltype = document.getElementById(`ltype${i}`);
                        ltype.classList.add('ltype-active');
                    }, i * 150);
                }
            }, 500);
        }
        
        function step4() {
            resetAllAnimations();
            updateStepIndicator(4, 'RyR ê°œë°©ê³¼ ì±„ë„ ìƒí˜¸ì‘ìš©');
            updateVoltage(+30, 80);
            
            document.getElementById('statusTitle').textContent = 'Step 4: RyR ê°œë°© (RyR Opening & Channel Interactions)';
            document.getElementById('statusDescription').textContent = 
                'L-type ì±„ë„ì˜ êµ¬ì¡° ë³€í™”ê°€ RyRì„ ê¸°ê³„ì ìœ¼ë¡œ í™œì„±í™”ì‹œí‚µë‹ˆë‹¤. ë™ì‹œì— ë‹¤ë¥¸ CaÂ²âº ì±„ë„ë“¤ë„ í˜‘ë ¥ì ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.';
            
            // ëª¨ë“  ì „ì•• ì˜ì¡´ì„± ì±„ë„ í™œì„±í™”
            for (let i = 1; i <= 6; i++) {
                const ttype = document.getElementById(`ttype${i}`);
                ttype.classList.add('ttype-active');
            }
            
            for (let i = 1; i <= 7; i++) {
                const ltype = document.getElementById(`ltype${i}`);
                ltype.classList.add('ltype-active');
            }
            
            // RyR í™œì„±í™”
            setTimeout(() => {
                for (let i = 1; i <= 10; i++) {
                    setTimeout(() => {
                        const ryr = document.getElementById(`ryr${i}`);
                        ryr.classList.add('ryr-active');
                    }, i * 100);
                }
            }, 500);
            
            // IP3R ë³´ì¡°ì  í™œì„±í™”
            setTimeout(() => {
                for (let i = 1; i <= 4; i++) {
                    const ip3r = document.getElementById(`ip3r${i}`);
                    ip3r.classList.add('ip3r-active');
                }
            }, 1000);
        }
        
        function step5() {
            resetAllAnimations();
            updateStepIndicator(5, 'í˜‘ë ¥ì  CaÂ²âº ë°©ì¶œ');
            updateVoltage(+30, 80);
            
            document.getElementById('statusTitle').textContent = 'Step 5: í˜‘ë ¥ì  CaÂ²âº ë°©ì¶œ (Cooperative Calcium Release)';
            document.getElementById('statusDescription').textContent = 
                'ë‹¤ì–‘í•œ CaÂ²âº ì±„ë„ë“¤ì´ í˜‘ë ¥í•˜ì—¬ CaÂ²âºë¥¼ ë°©ì¶œí•©ë‹ˆë‹¤. RyRì—ì„œ ì£¼ìš” ë°©ì¶œ, ë‹¤ë¥¸ ì±„ë„ë“¤ì€ ë³´ì¡°ì  ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.';
            
            // ëª¨ë“  ì±„ë„ í™œì„± ìœ ì§€
            for (let i = 1; i <= 6; i++) {
                const ttype = document.getElementById(`ttype${i}`);
                ttype.classList.add('ttype-active');
            }
            
            for (let i = 1; i <= 7; i++) {
                const ltype = document.getElementById(`ltype${i}`);
                ltype.classList.add('ltype-active');
            }
            
            for (let i = 1; i <= 10; i++) {
                const ryr = document.getElementById(`ryr${i}`);
                ryr.classList.add('ryr-active');
            }
            
            for (let i = 1; i <= 4; i++) {
                const ip3r = document.getElementById(`ip3r${i}`);
                ip3r.classList.add('ip3r-active');
            }
            
            // Ca2+ ë°©ì¶œ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                for (let i = 1; i <= 15; i++) {
                    setTimeout(() => {
                        const caRel = document.getElementById(`ca-rel-${i}`);
                        caRel.style.opacity = '1';
                        caRel.classList.add('floating');
                    }, i * 80);
                }
            }, 800);
        }
        
        function step6() {
            resetAllAnimations();
            updateStepIndicator(6, 'CaÂ²âº ì¬í¡ìˆ˜ì™€ SOCC í™œì„±í™”');
            updateVoltage(-70, 20);
            
            document.getElementById('statusTitle').textContent = 'Step 6: CaÂ²âº ì¬í¡ìˆ˜ (Calcium Reuptake & SOCC Activation)';
            document.getElementById('statusDescription').textContent = 
                'SERCA pumpê°€ CaÂ²âºë¥¼ ì¬í¡ìˆ˜í•˜ê³ , SR CaÂ²âº ê°ì†Œë¡œ SOCCê°€ í™œì„±í™”ë˜ì–´ ì„¸í¬ì™¸ CaÂ²âºë¥¼ ìœ ì…ì‹œì¼œ í•­ìƒì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.';
            
            // ë°©ì¶œëœ Ca2+ í‘œì‹œ
            for (let i = 1; i <= 15; i++) {
                const caRel = document.getElementById(`ca-rel-${i}`);
                caRel.style.opacity = '1';
            }
            
            // SOCC í™œì„±í™” (Store depletion ê°ì§€)
            setTimeout(() => {
                for (let i = 1; i <= 4; i++) {
                    setTimeout(() => {
                        const socc = document.getElementById(`socc${i}`);
                        socc.classList.add('socc-active');
                    }, i * 200);
                }
            }, 500);
            
            // Ca2+ ì¬í¡ìˆ˜ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                for (let i = 1; i <= 15; i++) {
                    setTimeout(() => {
                        const caRel = document.getElementById(`ca-rel-${i}`);
                        caRel.classList.add('retracting');
                        setTimeout(() => {
                            caRel.style.opacity = '0';
                        }, 2000);
                    }, i * 100);
                }
            }, 1000);
        }
        
        function showChannelComparison() {
            document.getElementById('channelComparison').style.display = 'block';
        }
        
        function hideChannelComparison() {
            document.getElementById('channelComparison').style.display = 'none';
        }
        
        function resetSimulation() {
            resetAllAnimations();
            hideChannelComparison();
            step1();
        }
        
        // ìë™ ì¬ìƒ ê¸°ëŠ¥
        function autoPlay() {
            let step = 1;
            const interval = setInterval(() => {
                switch(step) {
                    case 1: step1(); break;
                    case 2: step2(); break;
                    case 3: step3(); break;
                    case 4: step4(); break;
                    case 5: step5(); break;
                    case 6: step6(); break;
                    default:
                        clearInterval(interval);
                        setTimeout(() => autoPlay(), 2000);
                        return;
                }
                step++;
                if (step > 6) {
                    clearInterval(interval);
                    setTimeout(() => autoPlay(), 3000);
                }
            }, 4000);
        }
        
        // ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('DOMContentLoaded', function() {
            step1();
            
            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
            document.addEventListener('keydown', function(e) {
                switch(e.key) {
                    case '1': step1(); break;
                    case '2': step2(); break;
                    case '3': step3(); break;
                    case '4': step4(); break;
                    case '5': step5(); break;
                    case '6': step6(); break;
                    case 'c': case 'C': showChannelComparison(); break;
                    case 'r': case 'R': resetSimulation(); break;
                    case 'Escape': hideChannelComparison(); break;
                    case ' ': 
                        e.preventDefault();
                        autoPlay(); 
                        break;
                }
            });
            
            // ì±„ë„ë“¤ì— í˜¸ë²„ íš¨ê³¼ ë° ì •ë³´ í‘œì‹œ
            const channelTypes = ['ltype', 'ttype', 'socc', 'ryr', 'ip3r'];
            const channelCounts = [7, 6, 4, 10, 4];
            
            channelTypes.forEach((type, typeIndex) => {
                for (let i = 1; i <= channelCounts[typeIndex]; i++) {
                    const channel = document.getElementById(`${type}${i}`);
                    if (channel) {
                        channel.addEventListener('mouseenter', function() {
                            this.style.transform = 'scale(1.3)';
                            this.style.zIndex = '10';
                        });
                        channel.addEventListener('mouseleave', function() {
                            this.style.transform = 'scale(1)';
                            this.style.zIndex = '5';
                        });
                    }
                }
            });
            
            console.log('CaÂ²âº Channels & Excitation-Contraction Coupling ì‹œë®¬ë ˆì´ì…˜ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
            console.log('í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤: 1-6 (ê° ë‹¨ê³„), C (ì±„ë„ ë¹„êµ), L (L vs T êµ¬ì¡°), R (ë¦¬ì…‹), ESC (ë¹„êµì°½ ë‹«ê¸°), Space (ìë™ì¬ìƒ)');
        });
    </script>
</body>
</html>