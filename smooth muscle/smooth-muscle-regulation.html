<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smooth Muscle Regulation - MLCK/MLCP Balance</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(to bottom, #f0f4f8, #e1e8ed);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .header h1 {
            font-size: 2.2em;
            color: #1a1a1a;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .header p {
            font-size: 1.1em;
            color: #6c757d;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
            color: #495057;
            min-width: 140px;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-baseline { 
            border-color: #6c757d;
            color: #6c757d;
        }
        
        .btn-baseline:hover { 
            background: #6c757d;
            color: white;
        }
        
        .btn-rock { 
            border-color: #dc3545;
            color: #dc3545;
        }
        
        .btn-rock:hover { 
            background: #dc3545;
            color: white;
        }
        
        .btn-pkc { 
            border-color: #6610f2;
            color: #6610f2;
        }
        
        .btn-pkc:hover { 
            background: #6610f2;
            color: white;
        }
        
        .btn-pkg { 
            border-color: #28a745;
            color: #28a745;
        }
        
        .btn-pkg:hover { 
            background: #28a745;
            color: white;
        }
        
        .btn-combined { 
            border-color: #fd7e14;
            color: #fd7e14;
        }
        
        .btn-combined:hover { 
            background: #fd7e14;
            color: white;
        }
        
        /* Main simulation area matching PDF Figure 13.6 */
        .simulation-area {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 40px;
            margin-bottom: 30px;
            position: relative;
            height: 800px;
            overflow: hidden;
        }
        
        /* Cell membrane representation */
        .cell-membrane {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 900px;
            height: 600px;
            border: 3px solid #ffc107;
            border-radius: 20px;
            background: linear-gradient(to bottom, 
                rgba(255, 243, 224, 0.3) 0%, 
                rgba(255, 243, 224, 0.1) 50%, 
                rgba(255, 243, 224, 0.3) 100%);
        }
        
        .membrane-label {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9em;
            font-weight: 600;
            color: #856404;
            background: white;
            padding: 2px 10px;
        }
        
        /* Myosin and Phosphorylation cycle */
        .myosin-cycle {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 180px;
        }
        
        .myosin-box {
            position: absolute;
            width: 120px;
            height: 50px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.5s ease;
        }
        
        .myosin-inactive {
            background: linear-gradient(135deg, #e9ecef, #dee2e6);
            color: #495057;
            left: 0;
            top: 0;
        }
        
        .myosin-active {
            background: linear-gradient(135deg, #ffc107, #ffb300);
            color: #fff;
            right: 0;
            top: 0;
        }
        
        .myosin-active.phosphorylated {
            animation: glow 2s infinite;
        }
        
        /* MLCP Complex */
        .mlcp-complex {
            position: absolute;
            top: 50%;
            left: 20%;
            transform: translateY(-50%);
            width: 200px;
            height: 150px;
        }
        
        .mlcp-main {
            position: absolute;
            width: 140px;
            height: 80px;
            background: linear-gradient(135deg, #17a2b8, #138496);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1em;
            box-shadow: 0 4px 12px rgba(23, 162, 184, 0.3);
            transition: all 0.5s ease;
        }
        
        .mlcp-main.inhibited {
            background: linear-gradient(135deg, #dc3545, #c82333);
            opacity: 0.6;
        }
        
        .mlcp-main.activated {
            background: linear-gradient(135deg, #28a745, #218838);
            animation: pulse 2s infinite;
        }
        
        .pp1c {
            position: absolute;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            border-radius: 50%;
            top: -20px;
            right: -20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7em;
            font-weight: 600;
            transition: all 0.5s ease;
        }
        
        .mypt1 {
            position: absolute;
            width: 80px;
            height: 40px;
            background: linear-gradient(135deg, #20c997, #17a689);
            border-radius: 20px;
            bottom: -15px;
            left: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7em;
            font-weight: 600;
            transition: all 0.5s ease;
        }
        
        .subunit-20kda {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #6c757d, #5a6268);
            border-radius: 50%;
            top: 20px;
            left: -25px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.6em;
            font-weight: 600;
        }
        
        /* MLCK */
        .mlck-box {
            position: absolute;
            top: 50%;
            right: 20%;
            transform: translateY(-50%);
            width: 140px;
            height: 80px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1em;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
            transition: all 0.5s ease;
        }
        
        .mlck-box.active {
            animation: pulse 2s infinite;
        }
        
        /* Ca2+-CaM complex */
        .ca-cam-complex {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 40px;
            background: linear-gradient(135deg, #ffc107, #ffb300);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 0.8em;
            font-weight: 600;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .ca-cam-complex.visible {
            opacity: 1;
        }
        
        /* Regulatory Kinases */
        .rock-pathway {
            position: absolute;
            top: 80px;
            right: 150px;
            width: 180px;
            height: 150px;
        }
        
        .pkc-pathway {
            position: absolute;
            top: 80px;
            left: 150px;
            width: 180px;
            height: 150px;
        }
        
        .pkg-pathway {
            position: absolute;
            bottom: 280px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 150px;
        }
        
        .kinase-box {
            width: 80px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            position: absolute;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .rock-box {
            background: linear-gradient(135deg, #dc3545, #c82333);
            top: 0;
            right: 0;
        }
        
        .pkc-box {
            background: linear-gradient(135deg, #6610f2, #520dc2);
            top: 0;
            left: 0;
        }
        
        .pkg-box {
            background: linear-gradient(135deg, #28a745, #218838);
            bottom: 0;
            left: 60px;
        }
        
        .kinase-box.active {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        /* Signal molecules */
        .signal-molecule {
            position: absolute;
            width: 60px;
            height: 35px;
            border-radius: 17px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .rhoa {
            background: linear-gradient(135deg, #e83e8c, #d91a72);
            top: -50px;
            right: 10px;
        }
        
        .cpi17 {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            top: -50px;
            left: 10px;
        }
        
        .no {
            background: linear-gradient(135deg, #00bcd4, #00acc1);
            bottom: -50px;
            left: 30px;
            width: 40px;
            height: 30px;
        }
        
        .cgmp {
            background: linear-gradient(135deg, #009688, #00897b);
            bottom: -50px;
            right: 30px;
            width: 50px;
            height: 30px;
        }
        
        .signal-molecule.visible {
            opacity: 1;
        }
        
        /* Phosphorylation indicators */
        .phosphate-group {
            position: absolute;
            width: 25px;
            height: 25px;
            background: radial-gradient(circle, #ff9800, #f57c00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7em;
            font-weight: bold;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .phosphate-group.attached {
            opacity: 1;
            animation: blink 1.5s infinite;
        }
        
        /* Arrows and connections */
        .arrow {
            position: absolute;
            stroke-width: 2;
            fill: none;
            opacity: 0.3;
            transition: all 0.5s ease;
        }
        
        .arrow.active {
            opacity: 1;
            stroke-width: 3;
        }
        
        .arrow-inhibit {
            stroke: #dc3545;
            stroke-dasharray: 5,5;
        }
        
        .arrow-activate {
            stroke: #28a745;
        }
        
        .arrow-phosphorylate {
            stroke: #ffc107;
        }
        
        /* Status indicators */
        .status-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            min-width: 200px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .status-title {
            font-size: 0.9em;
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85em;
        }
        
        .status-label {
            color: #6c757d;
        }
        
        .status-value {
            font-weight: 600;
            color: #495057;
        }
        
        .contraction-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .contraction-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #ffc107, #dc3545);
            transition: width 1s ease;
            border-radius: 10px;
        }
        
        /* Info section */
        .info-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #dee2e6;
        }
        
        .pathway-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .pathway-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #17a2b8;
        }
        
        .pathway-card.rock { border-left-color: #dc3545; }
        .pathway-card.pkc { border-left-color: #6610f2; }
        .pathway-card.pkg { border-left-color: #28a745; }
        
        .pathway-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #212529;
        }
        
        .pathway-description {
            font-size: 0.9em;
            line-height: 1.6;
            color: #495057;
        }
        
        .pathway-details {
            margin-top: 12px;
            font-size: 0.85em;
            color: #6c757d;
        }
        
        .detail-row {
            margin-bottom: 5px;
        }
        
        .detail-label {
            font-weight: 600;
        }
        
        /* Animations */
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }
        }
        
        @keyframes glow {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
            }
            50% { 
                box-shadow: 0 0 20px rgba(255, 193, 7, 0.8);
            }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Smooth Muscle Regulation Pathways</h1>
            <p>MLC<sub>20</sub> Phosphorylation Control via MLCK/MLCP Balance</p>
        </div>

        <div class="controls">
            <button class="btn btn-baseline" onclick="showBaseline()">Baseline</button>
            <button class="btn btn-rock" onclick="activateROCK()">ROCK Pathway</button>
            <button class="btn btn-pkc" onclick="activatePKC()">PKC Pathway</button>
            <button class="btn btn-pkg" onclick="activatePKG()">PKG Pathway</button>
            <button class="btn btn-combined" onclick="activateCombined()">Ca²⁺ Sensitization</button>
        </div>

        <div class="simulation-area">
            <div class="cell-membrane">
                <span class="membrane-label">Smooth Muscle Cell</span>
            </div>

            <!-- Status Panel -->
            <div class="status-panel">
                <div class="status-title">Contractile State</div>
                <div class="status-item">
                    <span class="status-label">MLCP Activity:</span>
                    <span class="status-value" id="mlcpActivity">100%</span>
                </div>
                <div class="status-item">
                    <span class="status-label">MLC₂₀ Phosphorylation:</span>
                    <span class="status-value" id="mlcPhos">30%</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Ca²⁺ Sensitivity:</span>
                    <span class="status-value" id="caSensitivity">Normal</span>
                </div>
                <div class="contraction-bar">
                    <div class="contraction-fill" id="contractionBar" style="width: 30%;"></div>
                </div>
            </div>

            <!-- MLCP Complex -->
            <div class="mlcp-complex">
                <div class="mlcp-main" id="mlcpMain">MLCP</div>
                <div class="pp1c" id="pp1c">PP1c</div>
                <div class="mypt1" id="mypt1">MYPT1</div>
                <div class="subunit-20kda">20kDa</div>
                <div class="phosphate-group" id="mypt1Phos" style="right: 30px; bottom: 10px;">P</div>
            </div>

            <!-- MLCK -->
            <div class="mlck-box" id="mlckBox">
                MLCK
                <div class="ca-cam-complex" id="caCamComplex">Ca²⁺-CaM</div>
            </div>

            <!-- Myosin Cycle -->
            <div class="myosin-cycle">
                <div class="myosin-box myosin-inactive" id="myosinInactive">Myosin</div>
                <div class="myosin-box myosin-active" id="myosinActive">Myosin-P</div>
                <div class="phosphate-group" id="myosinPhos" style="right: 35px; top: 10px;">P</div>
                
                <!-- Cycle arrows -->
                <svg width="300" height="180" style="position: absolute; top: 0; left: 0;">
                    <!-- Phosphorylation arrow (MLCK) -->
                    <path d="M 120 25 Q 180 25 180 25" 
                          stroke="#007bff" stroke-width="2" fill="none" 
                          marker-end="url(#arrowhead-blue)" id="phosArrow" opacity="0.3"/>
                    <!-- Dephosphorylation arrow (MLCP) -->
                    <path d="M 180 50 Q 120 50 120 50" 
                          stroke="#17a2b8" stroke-width="2" fill="none" 
                          marker-end="url(#arrowhead-cyan)" id="dephosArrow" opacity="0.3"/>
                    
                    <!-- Arrow markers -->
                    <defs>
                        <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" 
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#007bff"/>
                        </marker>
                        <marker id="arrowhead-cyan" markerWidth="10" markerHeight="7" 
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#17a2b8"/>
                        </marker>
                        <marker id="arrowhead-red" markerWidth="10" markerHeight="7" 
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#dc3545"/>
                        </marker>
                        <marker id="arrowhead-green" markerWidth="10" markerHeight="7" 
                                refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#28a745"/>
                        </marker>
                    </defs>
                </svg>
                
                <div style="position: absolute; top: 80px; left: 50%; transform: translateX(-50%); 
                           text-align: center; font-size: 0.85em; color: #6c757d;">
                    <div style="margin-bottom: 5px;">↓</div>
                    <div style="font-weight: 600;">CONTRACTION</div>
                </div>
            </div>

            <!-- ROCK Pathway -->
            <div class="rock-pathway">
                <div class="kinase-box rock-box" id="rockBox">
                    ROCK
                </div>
                <div class="signal-molecule rhoa" id="rhoa">RhoA</div>
                
                <!-- Inhibition arrow to MLCP -->
                <svg width="180" height="150" style="position: absolute; top: 0; left: 0;">
                    <path d="M 80 60 Q 40 100 0 120" 
                          stroke="#dc3545" stroke-width="2" fill="none" 
                          stroke-dasharray="5,5" opacity="0.3" id="rockToMlcp"
                          marker-end="url(#arrowhead-red)"/>
                </svg>
            </div>

            <!-- PKC Pathway -->
            <div class="pkc-pathway">
                <div class="kinase-box pkc-box" id="pkcBox">
                    PKC
                </div>
                <div class="signal-molecule cpi17" id="cpi17">CPI-17</div>
                <div class="phosphate-group" id="cpi17Phos" style="left: 70px; top: 20px;">P</div>
                
                <!-- Inhibition arrow to PP1c -->
                <svg width="180" height="150" style="position: absolute; top: 0; left: 0;">
                    <path d="M 80 60 Q 120 100 160 120" 
                          stroke="#6610f2" stroke-width="2" fill="none" 
                          stroke-dasharray="5,5" opacity="0.3" id="pkcToMlcp"
                          marker-end="url(#arrowhead-red)"/>
                </svg>
            </div>

            <!-- PKG Pathway -->
            <div class="pkg-pathway">
                <div class="kinase-box pkg-box" id="pkgBox">
                    PKG1α
                </div>
                <div class="signal-molecule no" id="no">NO</div>
                <div class="signal-molecule cgmp" id="cgmp">cGMP</div>
                
                <!-- Activation arrow to MLCP -->
                <svg width="200" height="150" style="position: absolute; top: 0; left: 0;">
                    <path d="M 100 60 Q 100 20 100 0" 
                          stroke="#28a745" stroke-width="2" fill="none" 
                          opacity="0.3" id="pkgToMlcp"
                          marker-end="url(#arrowhead-green)"/>
                </svg>
            </div>

            <!-- Central label for state -->
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                        font-size: 1.5em; font-weight: 600; color: #495057; opacity: 0.3;"
                 id="centralState">
                BASELINE
            </div>
        </div>

        <div class="info-section">
            <h2 style="text-align: center; margin-bottom: 20px; color: #212529;">
                Regulatory Pathways
            </h2>
            
            <div class="pathway-cards">
                <div class="pathway-card rock">
                    <div class="pathway-title">ROCK (Rho-kinase)</div>
                    <div class="pathway-description">
                        Serine-threonine protein kinase regulated by RhoA. Phosphorylates MYPT1 
                        to inhibit MLCP activity, promoting contraction independent of Ca²⁺ changes.
                    </div>
                    <div class="pathway-details">
                        <div class="detail-row">
                            <span class="detail-label">Activators:</span> Norepinephrine, Angiotensin II, Endothelin
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Target:</span> MYPT1 phosphorylation
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Effect:</span> ↑ Ca²⁺ sensitization
                        </div>
                    </div>
                </div>

                <div class="pathway-card pkc">
                    <div class="pathway-title">PKC (Protein Kinase C)</div>
                    <div class="pathway-description">
                        Activated by phospholipase C pathway. Phosphorylates CPI-17, which binds 
                        to and inhibits PP1c catalytic domain of MLCP.
                    </div>
                    <div class="pathway-details">
                        <div class="detail-row">
                            <span class="detail-label">Activators:</span> DAG, Ca²⁺, IP₃ pathway
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Target:</span> CPI-17 (17 kDa inhibitor)
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Effect:</span> MLCP inhibition
                        </div>
                    </div>
                </div>

                <div class="pathway-card pkg">
                    <div class="pathway-title">PKG (Protein Kinase G)</div>
                    <div class="pathway-description">
                        Activated by cGMP from NO-stimulated guanylyl cyclase. Binds to MYPT1 
                        leucine zipper domain, activating MLCP and promoting relaxation.
                    </div>
                    <div class="pathway-details">
                        <div class="detail-row">
                            <span class="detail-label">Activators:</span> Nitric oxide (NO), cGMP
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Target:</span> MYPT1 activation
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Effect:</span> Vascular relaxation
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #17a2b8;"></div>
                <span>MLCP (Active)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #dc3545;"></div>
                <span>MLCP (Inhibited)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #007bff;"></div>
                <span>MLCK</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffc107;"></div>
                <span>Ca²⁺-CaM</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff9800;"></div>
                <span>Phosphorylation</span>
            </div>
        </div>
    </div>

    <script>
        // State variables
        let currentState = 'baseline';
        let mlcpActivityLevel = 100;
        let mlcPhosphorylationLevel = 30;
        let contractionLevel = 30;
        
        // Baseline state
        function showBaseline() {
            resetAll();
            currentState = 'baseline';
            
            mlcpActivityLevel = 100;
            mlcPhosphorylationLevel = 30;
            contractionLevel = 30;
            
            updateDisplay();
            document.getElementById('centralState').textContent = 'BASELINE';
            document.getElementById('centralState').style.opacity = '0.3';
        }
        
        // ROCK pathway activation
        function activateROCK() {
            resetAll();
            currentState = 'rock';
            
            // Activate ROCK elements
            document.getElementById('rockBox').classList.add('active');
            document.getElementById('rhoa').classList.add('visible');
            document.getElementById('rockToMlcp').style.opacity = '1';
            
            // Phosphorylate MYPT1
            document.getElementById('mypt1Phos').classList.add('attached');
            document.getElementById('mypt1').style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
            
            // Inhibit MLCP
            document.getElementById('mlcpMain').classList.add('inhibited');
            
            // Update levels
            mlcpActivityLevel = 30;
            mlcPhosphorylationLevel = 75;
            contractionLevel = 75;
            
            updateDisplay();
            document.getElementById('centralState').textContent = 'ROCK ACTIVE';
            document.getElementById('centralState').style.color = '#dc3545';
            document.getElementById('centralState').style.opacity = '0.5';
        }
        
        // PKC pathway activation
        function activatePKC() {
            resetAll();
            currentState = 'pkc';
            
            // Activate PKC elements
            document.getElementById('pkcBox').classList.add('active');
            document.getElementById('cpi17').classList.add('visible');
            document.getElementById('cpi17Phos').classList.add('attached');
            document.getElementById('pkcToMlcp').style.opacity = '1';
            
            // Inhibit PP1c
            document.getElementById('pp1c').style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
            document.getElementById('pp1c').style.opacity = '0.6';
            
            // Inhibit MLCP
            document.getElementById('mlcpMain').classList.add('inhibited');
            
            // Update levels
            mlcpActivityLevel = 35;
            mlcPhosphorylationLevel = 70;
            contractionLevel = 70;
            
            updateDisplay();
            document.getElementById('centralState').textContent = 'PKC ACTIVE';
            document.getElementById('centralState').style.color = '#6610f2';
            document.getElementById('centralState').style.opacity = '0.5';
        }
        
        // PKG pathway activation
        function activatePKG() {
            resetAll();
            currentState = 'pkg';
            
            // Activate PKG elements
            document.getElementById('pkgBox').classList.add('active');
            document.getElementById('no').classList.add('visible');
            document.getElementById('cgmp').classList.add('visible');
            document.getElementById('pkgToMlcp').style.opacity = '1';
            
            // Activate MLCP
            document.getElementById('mlcpMain').classList.add('activated');
            document.getElementById('mypt1').style.background = 'linear-gradient(135deg, #28a745, #218838)';
            
            // Update levels
            mlcpActivityLevel = 150;
            mlcPhosphorylationLevel = 10;
            contractionLevel = 10;
            
            updateDisplay();
            document.getElementById('centralState').textContent = 'PKG ACTIVE';
            document.getElementById('centralState').style.color = '#28a745';
            document.getElementById('centralState').style.opacity = '0.5';
        }
        
        // Combined activation (Ca2+ sensitization)
        function activateCombined() {
            resetAll();
            currentState = 'combined';
            
            // Activate both ROCK and PKC
            document.getElementById('rockBox').classList.add('active');
            document.getElementById('pkcBox').classList.add('active');
            document.getElementById('rhoa').classList.add('visible');
            document.getElementById('cpi17').classList.add('visible');
            document.getElementById('cpi17Phos').classList.add('attached');
            document.getElementById('mypt1Phos').classList.add('attached');
            document.getElementById('rockToMlcp').style.opacity = '1';
            document.getElementById('pkcToMlcp').style.opacity = '1';
            
            // Strong MLCP inhibition
            document.getElementById('mlcpMain').classList.add('inhibited');
            document.getElementById('mlcpMain').style.opacity = '0.4';
            document.getElementById('pp1c').style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
            document.getElementById('pp1c').style.opacity = '0.5';
            document.getElementById('mypt1').style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
            
            // Update levels
            mlcpActivityLevel = 10;
            mlcPhosphorylationLevel = 95;
            contractionLevel = 95;
            
            // Show Ca2+-CaM and activate MLCK
            document.getElementById('caCamComplex').classList.add('visible');
            document.getElementById('mlckBox').classList.add('active');
            
            updateDisplay();
            document.getElementById('centralState').textContent = 'Ca²⁺ SENSITIZATION';
            document.getElementById('centralState').style.color = '#fd7e14';
            document.getElementById('centralState').style.opacity = '0.6';
        }
        
        // Update display
        function updateDisplay() {
            // Update status panel
            document.getElementById('mlcpActivity').textContent = mlcpActivityLevel + '%';
            document.getElementById('mlcPhos').textContent = mlcPhosphorylationLevel + '%';
            
            let sensitivity = 'Normal';
            if (mlcPhosphorylationLevel > 80) {
                sensitivity = 'Very High';
                document.getElementById('caSensitivity').style.color = '#dc3545';
            } else if (mlcPhosphorylationLevel > 60) {
                sensitivity = 'Increased';
                document.getElementById('caSensitivity').style.color = '#fd7e14';
            } else if (mlcPhosphorylationLevel < 20) {
                sensitivity = 'Decreased';
                document.getElementById('caSensitivity').style.color = '#28a745';
            } else {
                document.getElementById('caSensitivity').style.color = '#495057';
            }
            document.getElementById('caSensitivity').textContent = sensitivity;
            
            // Update contraction bar
            document.getElementById('contractionBar').style.width = contractionLevel + '%';
            
            // Update myosin phosphorylation state
            if (mlcPhosphorylationLevel > 50) {
                document.getElementById('myosinActive').classList.add('phosphorylated');
                document.getElementById('myosinPhos').classList.add('attached');
                document.getElementById('phosArrow').style.opacity = '1';
                document.getElementById('dephosArrow').style.opacity = '0.3';
            } else {
                document.getElementById('myosinActive').classList.remove('phosphorylated');
                document.getElementById('myosinPhos').classList.remove('attached');
                document.getElementById('phosArrow').style.opacity = '0.3';
                document.getElementById('dephosArrow').style.opacity = '1';
            }
        }
        
        // Reset all elements
        function resetAll() {
            // Remove all active classes
            document.querySelectorAll('.active').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.visible').forEach(el => el.classList.remove('visible'));
            document.querySelectorAll('.attached').forEach(el => el.classList.remove('attached'));
            document.querySelectorAll('.inhibited').forEach(el => el.classList.remove('inhibited'));
            document.querySelectorAll('.activated').forEach(el => el.classList.remove('activated'));
            document.querySelectorAll('.phosphorylated').forEach(el => el.classList.remove('phosphorylated'));
            
            // Reset colors
            document.getElementById('pp1c').style.background = 'linear-gradient(135deg, #6f42c1, #5a32a3)';
            document.getElementById('pp1c').style.opacity = '1';
            document.getElementById('mypt1').style.background = 'linear-gradient(135deg, #20c997, #17a689)';
            document.getElementById('mlcpMain').style.opacity = '1';
            
            // Reset arrows
            document.getElementById('rockToMlcp').style.opacity = '0.3';
            document.getElementById('pkcToMlcp').style.opacity = '0.3';
            document.getElementById('pkgToMlcp').style.opacity = '0.3';
            document.getElementById('phosArrow').style.opacity = '0.3';
            document.getElementById('dephosArrow').style.opacity = '0.3';
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            showBaseline();
            
            // Add hover effects
            document.querySelectorAll('.kinase-box').forEach(box => {
                box.addEventListener('mouseenter', function() {
                    if (!this.classList.contains('active')) {
                        this.style.opacity = '0.8';
                        this.style.transform = 'scale(1.05)';
                    }
                });
                box.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.opacity = '1';
                        this.style.transform = 'scale(1)';
                    }
                });
            });
            
            console.log('Smooth Muscle Regulation Simulation Loaded');
            console.log('Based on Figure 13.6 - Pathways regulating smooth muscle contraction');
        });
    </script>
</body>
</html>